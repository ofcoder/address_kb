{"version":3,"file":"application.bundle.js","sources":["../src/components/addressitem.js","../src/stores/history.js","../src/components/addressdetail.js","../src/components/admin.js","../src/components/addresslist.js","../src/stores/shop.js","../src/components/address.js","../src/components/super.js","../src/components/filter.js","../src/components/history.js","../src/application.js"],"sourcesContent":["import './css/addressitem.css';\nexport const AddressItem = {\n    methods: {\n        removeItem(){\n            if (this.status !== '2') {\n                this.$emit('remove');\n            }\n        },\n    },\n    props: {\n        street: { default: '' },\n        house: { default: 0 },\n        flatCount: { default: 0 },\n        status: { default: 1 },\n        isEdit: { default: true },\n        isAdmin: { default: true }\n    },\n    emits: [\n        'update:flatCount',\n        'update:house',\n        'update:isEdit',\n        'update:status',\n        'update:street',\n        'remove'\n    ],\n    computed: {\n        streetInput: {\n            get: function(){\n                return this.street;\n            },\n            set: function(newValue){\n                this.$emit('update:street', newValue)\n            }\n        },\n        houseInput: {\n            get: function(){\n                return this.house;\n            },\n            set: function(newValue){\n                this.$emit('update:house', newValue)\n            }\n        },\n        flatCountInput: {\n            get: function(){\n                return this.flatCount;\n            },\n            set: function(newValue){\n                this.$emit('update:flatCount', newValue)\n            }\n        },\n    },\n    // language=Vue\n    template: `\n        <div class=\"address-item\">\n            <div class=\"address-first\">\n                <input v-model=\"streetInput\" :readonly=\"status !== '1' || !isEdit && !isAdmin\"> \n            </div>\n            <div class=\"address-second\">\n                <input v-model=\"houseInput\" :readonly=\"status !== '1' || !isEdit && !isAdmin\">\n            </div>\n            <div class=\"address-third\">\n                <input v-model=\"flatCountInput\" :readonly=\"status !== '1' || !isEdit && !isAdmin\" type=\"number\" min=\"1\" step=\"1\">\n            </div>\n            <div v-if=\"status === '1' && (isEdit || isAdmin)\" class=\"delete-item\" @click=\"removeItem\">\n                <img src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOSIgaGVpZ2h0PSIzIiB2aWV3Qm94PSIwIDAgOSAzIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgPHBhdGggZD0iTTguNjI1IDAuNzVDOC44MTI1IDAuNzUgOSAwLjkzNzUgOSAxLjEyNVYxLjg3NUM5IDIuMDg1OTQgOC44MTI1IDIuMjUgOC42MjUgMi4yNUgwLjM3NUMwLjE2NDA2MiAyLjI1IDAgMi4wODU5NCAwIDEuODc1VjEuMTI1QzAgMC45Mzc1IDAuMTY0MDYyIDAuNzUgMC4zNzUgMC43NUg4LjYyNVoiIGZpbGw9IiM2Qzc1N0QiLz4KPC9zdmc+Cg==\" />\n            </div>\n        </div>\n    `\n}","import {defineStore} from 'ui.vue3.pinia';\nexport const historyStore = defineStore('history', {\n    state: () => ({\n        histories: [\n            {\n                \"ID\": \"\",\n                \"UF_SHOP_NUMBER\": \"\",\n                \"UF_DATE\": \"\",\n                \"UF_USER_FULLNAME\": \"\",\n                \"UF_STATUS_AFTER\": \"\",\n                \"UF_STATUS_BEFORE\": \"\",\n            }\n        ],\n    }),\n});","import './css/addressdetail.css';\nimport {AddressItem} from \"./addressitem\";\nimport {mapState} from \"ui.vue3.pinia\";\nimport {historyStore} from \"../stores/history\";\nexport const AddressDetail = {\n    data() {\n        return {\n            isEdit: false,\n            error: false,\n            errorText: ''\n        }\n    },\n    props: {\n        detailShop: {default: {}},\n        isAdmin: {default: true},\n        isClick: {default: true},\n        marketer: {default: false}\n    },\n    emits: [\n        'update:detailShop',\n        'update:isClick'\n    ],\n    components: {\n        AddressItem\n    },\n    computed: {\n        ...mapState(historyStore, ['histories']),\n        detailShopAdmin: {\n            get: function(){\n                return this.detailShop;\n            },\n            set: function(newValue){\n                this.$emit('update:detailShop', newValue)\n            }\n        },\n        isClickValue: {\n            get: function(){\n                return this.isClick;\n            },\n            set: function(newValue){\n                this.$emit('update:isClick', newValue)\n            }\n        },\n        totalFlats() {\n            return this.detailShopAdmin.ADDRESS_PROGRAM.reduce((acc, item) => acc + +item.UF_FLAT_COUNT, 0);\n        },\n    },\n    watch: {\n        detailShopAdmin: {\n            deep: true,\n            handler() {\n                if (this.detailShopAdmin.UF_ADDRESS_SUM !== 0 && this.detailShopAdmin.UF_ADDRESS_SUM !== this.totalFlats) {\n                    this.detailShopAdmin.UF_ADDRESS_SUM = this.totalFlats;\n                }\n                this.saveAddresses();\n            }\n        },\n    },\n    methods: {\n        addNewAddress(){\n            if (this.detailShopAdmin.UF_STATUS !== '2') {\n                this.detailShopAdmin.ADDRESS_PROGRAM.push({\n                    'ID': '0',\n                    'UF_STREET': '',\n                    'UF_HOUSE': '',\n                    'UF_FLAT_COUNT': '',\n                    'UF_NUMBER': this.detailShopAdmin.ID\n                })\n            }\n        },\n        deleteAddress(key) {\n            this.detailShopAdmin.ADDRESS_PROGRAM.splice(key,1);\n        },\n        saveAddresses() {\n            BX.ready(() => {\n                BX.ajax.runComponentAction('kb:address.program', 'addAddressProgram', {\n                    mode: 'class',\n                    data: {\n                        shopNumber: this.detailShopAdmin.ID,\n                        addresses: this.detailShopAdmin.ADDRESS_PROGRAM,\n                        comment: this.detailShopAdmin.UF_COMMENT,\n                        totalFlats: this.detailShopAdmin.UF_ADDRESS_SUM\n                    },\n                }).then(function (response) {\n                }, function (response) {\n                    console.log(response);\n                });\n            });\n        },\n        changeStatus(element) {\n            if (confirm(this.$Bitrix.Loc.getMessage('CONFIRM'))) {\n                this.detailShopAdmin.UF_STATUS = element;\n                let _this = this;\n                BX.ready(() => {\n                    BX.ajax.runComponentAction('kb:address.program', 'setStatus', {\n                        mode: 'class',\n                        data: {\n                            shopId: this.detailShopAdmin.ID,\n                            status: this.detailShopAdmin.UF_STATUS\n                        },\n                    }).then(function (response) {\n                        if (response.data.STATUS === 'OK') {\n                            _this.histories.push(response.data.FIELDS);\n                        } else {\n                            _this.error = true;\n                            _this.errorText = response.data.FIELDS.TEXT;\n                        }\n                    }, function (response) {\n                        console.log(response);\n                    });\n                });\n            }\n        },\n        close() {\n            if (this.isEdit) {\n                this.isClickValue = 0;\n            }\n            this.isEdit = !this.isEdit;\n        }\n    },\n    // language=Vue\n    template: `\n      <div class=\"shop-detail\">\n        <template v-if=\"!error\">\n          <div class=\"address-shop\">{{ this.detailShopAdmin.UF_ADDRESS }}</div>\n          <div v-if=\"totalFlats > 0 || isEdit || isAdmin\" class=\"address-program\">\n            <div class=\"address-header\">\n              <div class=\"address-first\">{{ $Bitrix.Loc.getMessage('ADDRESS_STREET') }}</div>\n              <div class=\"address-second\">{{ $Bitrix.Loc.getMessage('ADDRESS_HOUSE') }}</div>\n              <div class=\"address-third\">{{ $Bitrix.Loc.getMessage('ADDRESS_COUNT_OF_FLATS') }}</div>\n              <div v-if=\"detailShopAdmin.UF_STATUS === '1' && (isEdit || isAdmin)\" class=\"delete-item-col\"></div>\n            </div>\n            <div class=\"address-body\">\n              <template v-for=\"(value, index) in detailShopAdmin.ADDRESS_PROGRAM\" :key=\"index\">\n                <AddressItem v-model:isEdit=\"isEdit\" :isAdmin=\"isAdmin\" v-model:status=\"detailShopAdmin.UF_STATUS\"\n                             v-model:street=\"value.UF_STREET\" v-model:house=\"value.UF_HOUSE\"\n                             v-model:flatCount=\"value.UF_FLAT_COUNT\" @remove=\"deleteAddress(index)\"/>\n              </template>\n            </div>\n            <div v-if=\"isAdmin || isEdit\" class=\"address-footer\">\n              <button class=\"add-address\" @click=\"addNewAddress\"\n                      :disabled=\"detailShopAdmin.UF_STATUS  !== '1' || !isEdit && !isAdmin\">\n                <img :src=\"this.$Bitrix.Data.get('site_path') + '/plus.svg'\" alt=\"plusImg\" aria-label=\"plusImg\"/>\n                {{ $Bitrix.Loc.getMessage('ADDRESS_ADD') }}\n              </button>\n              <div class=\"result-count\">\n                <div>{{ $Bitrix.Loc.getMessage('ADDRESS_RESULT_COUNT_OF_FLATS')}} &nbsp;</div>\n                <div class=\"count\">{{totalFlats}}</div>\n              </div>\n            </div>\n          </div>\n          <div v-if=\"detailShopAdmin.UF_COMMENT !== '' || isEdit || isAdmin\" class=\"address-comments\">\n            <textarea\n                :readonly=\"!isAdmin && (detailShopAdmin.UF_STATUS === '2' || !isEdit) || detailShopAdmin.UF_STATUS !== '1' && isAdmin\"\n                :placeholder=\"this.$Bitrix.Loc.getMessage('ADDRESS_COMMENT')\" class=\"address-comment\"\n                v-model=\"detailShopAdmin.UF_COMMENT\">{{ detailShopAdmin.UF_COMMENT }}</textarea>\n          </div>\n          <div class=\"ap-buttons\">\n            <button v-if=\"detailShopAdmin.UF_STATUS === '1' && !isAdmin\" class=\"address-save-edit\" @click=\"close\">\n              <img :src=\"$Bitrix.Data.get('site_path') + '/settings.svg'\" alt=\"editImg\">\n              {{ isEdit ? $Bitrix.Loc.getMessage('SAVE_CLOSE') : $Bitrix.Loc.getMessage('EDIT') }}\n            </button>\n            <template v-if=\"marketer\">\n              <button v-if=\"detailShopAdmin.UF_STATUS === '2'\" class=\"address-reject\" @click=\"changeStatus('1')\">\n                <img :src=\"$Bitrix.Data.get('site_path') + '/reject.svg'\" alt=\"statusImg\">\n                {{ $Bitrix.Loc.getMessage('REJECT') }}\n              </button>\n              <button v-if=\"detailShopAdmin.UF_STATUS === '2'\" class=\"address-accept\" @click=\"changeStatus('3')\">\n                <img :src=\"$Bitrix.Data.get('site_path') + '/approve.svg'\" alt=\"editImg\">\n                {{ $Bitrix.Loc.getMessage('APPROVE_2') }}\n              </button>\n              <button v-if=\"detailShopAdmin.UF_STATUS === '4'\" class=\"address-accept\" @click=\"changeStatus('1')\">\n                <img :src=\"$Bitrix.Data.get('site_path') + '/approve.svg'\" alt=\"statusImg\">\n                {{ $Bitrix.Loc.getMessage('APPROVE') }}\n              </button>\n              <button v-if=\"detailShopAdmin.UF_STATUS === '4'\" class=\"address-reject\" @click=\"changeStatus('3')\">\n                <img :src=\"$Bitrix.Data.get('site_path') + '/reject.svg'\" alt=\"statusImg\">\n                {{ $Bitrix.Loc.getMessage('REJECT') }}\n              </button>\n            </template>\n            <template v-else>\n              <button v-if=\"detailShopAdmin.UF_STATUS === '1' && isAdmin\" class=\"address-accept deactivated add\">\n                {{ $Bitrix.Loc.getMessage('NEW_AP') }}\n              </button>\n              <button v-if=\"detailShopAdmin.UF_STATUS === '2'\" class=\"address-accept deactivated\">\n                <img :src=\"$Bitrix.Data.get('site_path') + '/status-green.svg'\" alt=\"statusImg\">\n                {{ $Bitrix.Loc.getMessage('ADDRESS_ACCEPT_SENT') }}\n              </button>\n              <button v-if=\"(detailShopAdmin.UF_STATUS === '3' || detailShopAdmin.UF_STATUS === '4') && isAdmin\"\n                      class=\"address-accept deactivated done\">\n                <img :src=\"$Bitrix.Data.get('site_path') + '/done2.svg'\" alt=\"statusImg\">\n                {{ $Bitrix.Loc.getMessage('ADDRESS_ACCEPTED') }}\n              </button>\n              <template v-if=\"!isAdmin\">\n                <button v-if=\"detailShopAdmin.UF_STATUS === '1'\"\n                        :disabled=\"detailShopAdmin.ADDRESS_PROGRAM.length === 0\" class=\"address-accept\"\n                        @click=\"changeStatus('2')\">\n                  <img :src=\"$Bitrix.Data.get('site_path') + '/status.svg'\" alt=\"statusImg\">\n                  {{ $Bitrix.Loc.getMessage('ADDRESS_ACCEPT') }}\n                </button>\n                <button v-if=\"detailShopAdmin.UF_STATUS === '3'\" class=\"address-request-edit\"\n                        @click=\"changeStatus('4')\">\n                  <img :src=\"$Bitrix.Data.get('site_path') + '/status.svg'\" alt=\"editImg\">\n                  {{ $Bitrix.Loc.getMessage('EDIT_REQUEST') }}\n                </button>\n                <button v-if=\"detailShopAdmin.UF_STATUS === '4'\" class=\"address-request-edit deactivated\">\n                  {{ $Bitrix.Loc.getMessage('EDIT_REQUEST_SENT') }}\n                </button>\n              </template>\n            </template>\n            <img v-if=\"!isAdmin\" :src=\"$Bitrix.Data.get('site_path') + '/history.svg'\" alt=\"history\">\n          </div>\n        </template>\n        <template v-else>\n          <div class=\"error\">{{ errorText }}</div>\n        </template>\n      </div>\n    `\n}","import './css/admin.css';\nimport {AddressDetail} from \"./addressdetail\";\nexport const Admin = {\n    components: {\n        AddressDetail\n    },\n    props: {\n        shopDetail: {default: []}\n    },\n    emits: ['update:shopDetail'],\n    // language=Vue\n    template: `\n        <div class=\"admin-container\">\n            <template v-if=\"shopDetail.length !== 0\">\n                <div class=\"shop-name\">{{ $Bitrix.Loc.getMessage('SHOP', {'#NUMBER#': this.shopDetail.UF_NUMBER}) }}</div>\n                <AddressDetail v-model:detailShop=\"shopDetail\"/>\n            </template>\n            <template v-else>\n                {{ $Bitrix.Loc.getMessage('ERROR') }}\n            </template>\n        </div>\n    `\n}","import './css/addresslist.css';\nimport {AddressDetail} from \"./addressdetail\";\nexport const AddressList = {\n    components: {\n        AddressDetail\n    },\n    props: {\n        shopDetail: {default: {}},\n        isClick: {default: 0},\n        marketer: {default: false},\n    },\n    emits: ['update:shopDetail', 'update:isClick'],\n    computed: {\n        statusImg() {\n            let url = this.$Bitrix.Data.get('site_path');\n            switch (this.shopDetail.UF_STATUS) {\n                case '2':\n                    url += '/status-wait.svg';\n                    break;\n                case '3':\n                    url += '/status-done.svg';\n                    break;\n                case '4':\n                    url += '/status-edit.svg';\n                    break;\n                case '1':\n                default:\n                    url += '/status-new.svg';\n                    break;\n            }\n            return url;\n        },\n        statusName() {\n            let name = 'STATUS_';\n            switch (this.shopDetail.UF_STATUS) {\n                case '1':\n                case '2':\n                case '3':\n                case '4':\n                    name += this.shopDetail.UF_STATUS;\n                    break;\n                default:\n                    name += '1';\n                    break;\n            }\n            return name;\n        },\n        isClickInput: {\n            get() {\n                return this.isClick;\n            },\n            set(newValue){\n                this.$emit('update:isClick', newValue);\n            }\n        },\n        isClickBool() {\n            return this.isClickInput === this.shopDetail.ID;\n        }\n    },\n    methods: {\n        setClick() {\n            if (this.isClickBool) {\n                this.isClickInput = 0;\n            } else {\n                this.isClickInput = this.shopDetail.ID;\n                map.setCenter([this.shopDetail.UF_LATITUDE, this.shopDetail.UF_LONGITUDE]);\n            }\n        }\n    },\n    // language=Vue\n    template: `\n        <div class=\"address-shop-list\" @click=\"setClick()\" :class=\"[{isActive: isClickBool}, isClickBool ? 'status-' + shopDetail.UF_STATUS : '']\">\n            <div class=\"shop-status\">\n                <img :src=\"statusImg\" alt=\"statusImg\" :class=\"statusName\">\n                <div class=\"shop-number\">\n                    <div>{{ this.shopDetail.UF_NUMBER }}</div>\n                    <div v-if=\"isClickBool\">{{'- ' +  $Bitrix.Loc.getMessage(statusName) }}</div>\n                </div>\n                <img v-if=\"isClickBool\" :src=\"this.$Bitrix.Data.get('site_path') + '/toggle.svg'\" alt=\"toggleImg\">\n            </div>\n            <div class=\"totalFlats\" v-if=\"shopDetail.UF_ADDRESS_SUM > 0\">\n                {{ $Bitrix.Loc.getMessage('FLATS_COUNT', {'#COUNT#': Number(this.shopDetail.UF_ADDRESS_SUM).toLocaleString('ru-RU')}) }}\n            </div>\n            <div class=\"totalFlatsZero\" v-else>{{ $Bitrix.Loc.getMessage('FLATS_COUNT_ZERO') }}</div>\n        </div>\n        <div v-if=\"isClickBool\" class=\"shop-ap\" :class=\"[isClickBool ? 'shop-status-' + shopDetail.UF_STATUS : '']\">\n            <AddressDetail v-model:detailShop=\"shopDetail\" v-model:isClick=\"isClickInput\" :isAdmin=\"false\" :marketer=\"marketer\"/>\n        </div>\n    `\n}","import {defineStore} from 'ui.vue3.pinia';\nexport const shopStore = defineStore('shop', {\n    state: () => ({\n        shops: [\n            {\n                \"ID\": \"\",\n                \"UF_ADDRESS\": \"\",\n                \"UF_ADDRESS_SUM\": \"\",\n                \"UF_NUMBER\": \"\",\n                \"UF_CITY\":  \"\",\n                \"UF_REGION\":  \"\",\n                \"UF_TERRITORY\":  \"\",\n                \"UF_PEOPLE\":  \"\",\n                \"UF_PHONE\": \"\",\n                \"UF_ENTITY\": \"\",\n                \"UF_EMAIL\": \"\",\n                \"UF_ADMIN_ID\": \"\",\n                \"UF_STATUS\": \"\",\n                \"UF_LATITUDE\": \"\",\n                \"UF_LONGITUDE\": \"\",\n                \"UF_COMMENT\": \"\",\n                \"UF_RU_ID\": \"\",\n                \"UF_ZRU_ID\": \"\",\n                \"UF_SUPERVISOR\": \"\",\n                \"UF_VERTEX_COORDS\": \"\",\n                \"ADDRESS_PROGRAM\": []\n            }\n        ],\n        filters: {\n            \"UF_ZRU\": [],\n            \"UF_SUPERVISOR\": [],\n            \"UF_CITY\": [],\n            \"UF_REGION\": [],\n            \"UF_TERRITORY\": [],\n        }\n    }),\n});","import './css/address.css';\nimport {Admin} from \"./admin\";\nimport {Super} from \"./super\";\nimport {mapState} from \"ui.vue3.pinia\";\nimport {shopStore} from \"../stores/shop\";\nexport const Application =\n{\n    components: {\n\t\tAdmin, Super\n\t},\n\tprops: {\n\t\tmode: { default: 'admin' },\n\t},\n    data() {\n        return {\n            /* Текущие координаты области просмотра */\n            sw_lat: 0,\n            sw_lng: 0,\n            ne_lat: 0,\n            ne_lng: 0,\n            center_lat: 0,\n            center_lng: 0,\n            /* Текущие координаты области просмотра */\n        }\n    },    \n    computed: {\n        ...mapState(shopStore, ['shops']),\n        geoLocationsIsEmpty() {\n            return this.sw_lat === 0 || this.ne_lat === 0 || this.sw_lng === 0 || this.ne_lng === 0\n        },\n        pointToDelete() {\n            return this.shops.filter(shop => shop.UF_STATUS === '2')\n        }\n    },\n    methods: {\n\n        filteredShops() {\n            const {sw_lat, sw_lng, ne_lat, ne_lng} = this;\n            const _geoLocationsIsEmpty = this.geoLocationsIsEmpty;\n            return this.shops.filter(shop => _geoLocationsIsEmpty || \n            (shop.UF_LATITUDE >= sw_lat &&\n             shop.UF_LATITUDE <= ne_lat &&\n             shop.UF_LONGITUDE >= sw_lng &&\n             shop.UF_LONGITUDE <= ne_lng)\n            )\n        },\n\n\n        getParam(name, location) {\n            location = location || window.location.hash;\n            var res = location.match(new RegExp('[#&]' + name + '=([^&]*)', 'i'));\n            return (res && res[1] ? res[1] : false);\n        },\n        async setLocationHash(event) {\n            const params = [\n                'type=' + map.getType().split('#')[1],\n                'center=' + map.getCenter(),\n                'zoom=' + map.getZoom()\n            ];\n            window.location.hash = params.join('&');\n            if (event) {\n                const boundsNew = event.get('newBounds');\n                if (boundsNew) {\n                    const v_sw_lat = boundsNew[0][0];\n                    const v_sw_lng = boundsNew[0][1];\n                    const v_ne_lat = boundsNew[1][0];\n                    const v_ne_lng = boundsNew[1][1];\n                    if (  v_sw_lat < this.sw_lat \n                        || v_sw_lng < this.sw_lng \n                        || v_ne_lat > this.ne_lat \n                        || v_ne_lng > this.ne_lng) {\n\n                            //* добавим сразу с удвоенным запасом */\n                            const lat_additive = (v_ne_lat - v_sw_lat)/2;\n                            const lng_additive = (v_ne_lng - v_sw_lng)/2;\n\n                            this.sw_lat = v_sw_lat - lat_additive;\n                            this.sw_lng = v_sw_lng - lng_additive;\n                            this.ne_lat = v_ne_lat + lat_additive;\n                            this.ne_lng = v_ne_lng + lng_additive;\n                            await this.addGeoObjects();\n                    }\n                }\n            }\n      },\n        setMapStateByHash() {\n            const hashType = this.getParam('type'),\n                hashCenter = this.getParam('center'),\n                hashZoom = this.getParam('zoom');\n            if (hashType) {\n                map.setType('yandex#' + hashType);\n            }\n            if (hashCenter) {\n                map.setCenter(hashCenter.split(','));\n            }\n            if (hashZoom) {\n                map.setZoom(hashZoom);\n            }\n        },\n        async initYandexMaps() {\n            window.map = null;\n            await ymaps.ready(async () => {\n                window.map = new ymaps.Map(\n                \"map\",\n                {\n                  center:\n                    typeof this?.shops[0]?.UF_LONGITUDE !== \"undefined\" &&\n                    typeof this?.shops[0]?.UF_LATITUDE !== \"undefined\"\n                      ? [this.shops[0].UF_LATITUDE, this.shops[0].UF_LONGITUDE]\n                      : [\"55.749451\", \"37.542824\"],\n                  zoom: this.mode === \"admin\" ? 17 : 12,\n                  controls: [\n                    \"geolocationControl\",\n                    \"zoomControl\",\n                    \"typeSelector\",\n                  ],\n                },\n                {\n                  searchControlProvider: \"yandex#search\",\n                  zoomControlSize: \"small\",\n                  typeSelectorSize: \"small\",\n                  zoomControlPosition: {\n                    top: \"350px\",\n                    right: \"5px\",\n                  },\n                  geolocationControlPosition: {\n                    top: \"450px\",\n                    right: \"5px\",\n                  },\n                  typeSelectorPosition: {\n                    top: \"130px\",\n                    right: \"5px\",\n                  },\n                }\n              );\n              window.map.events.add([\"boundschange\"], async (event) => {\n                await this.setLocationHash(event);\n              });\n              // Try W3C Geolocation (Preferred)\n              if (navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(\n                  function (position) {\n                    ymaps.ready(function () {\n                      window.map.setCenter([\n                        position.coords.latitude,\n                        position.coords.longitude,\n                      ]);\n                    });\n                  },\n                  function () {\n                    ymaps.ready(function () {\n                      //window.map.setCenter([55.749451, 37.542824]);\n                    });\n                  }\n                );\n              }\n              // Browser doesn't support Geolocation\n              else {\n                ymaps.ready(function () {\n                  window.map.setCenter([55.749451, 37.542824]);\n                });\n              }\n\n              if (this.shops.length !== 0) {\n                await this.addGeoObjects();\n              }\n\n              this.setMapStateByHash();\n            });\n        },\n        async addGeoObjects() {\n            let features = [];\n            let polygonsObject = [];\n            let myIcon = ymaps.templateLayoutFactory.createClass(\n                '<div class=\"map-name\">'+ this.$Bitrix.Loc.getMessage('SHOP_NUMBER') +'{{ properties.iconCaption }}</div>'\n            );\n                const filteredShops = this.filteredShops();\n                filteredShops.forEach((element, key) => {\n                    features[key] = {\n                        type: \"Feature\",\n                        id: element.ID,\n                        geometry: {type: \"Point\", coordinates: [element.UF_LATITUDE, element.UF_LONGITUDE]},\n                        properties: {\n                            balloonContentHeader: this.$Bitrix.Loc.getMessage('SHOP', {'#NUMBER#': element.UF_NUMBER}),\n                            balloonContentBody: element.UF_ADDRESS + '<br>' +\n                                this.$Bitrix.Loc.getMessage('PEOPLE', {'#COUNT#': element.UF_PEOPLE}) + '<br>' +\n                                element.UF_ENTITY + '<br>' +\n                                this.$Bitrix.Loc.getMessage('TIME') + '<br>' +\n                                this.$Bitrix.Loc.getMessage('PHONE', {'#PHONE#': element.UF_PHONE}) + '<br>',\n                            clusterCaption: this.$Bitrix.Loc.getMessage('SHOP', {'#NUMBER#': element.UF_NUMBER}),\n                            iconCaption: element.UF_NUMBER,\n                        },\n                        options: {\n                            preset: \"islands#redDotIcon\",\n                            iconLayout: 'default#imageWithContent',\n                            iconImageHref: this.$Bitrix.Data.get('site_path') + '/map-logo.svg',\n                            iconImageSize: [36, 36],\n                            iconShape: {type: 'Rectangle', coordinates: [[0, 36], [36, 0]]},\n                            iconContentLayout: myIcon,\n                        }\n                    }\n    \n                    let polygonElement = {\n                        type: \"Feature\",\n                        id: element.ID,\n                        geometry: {\n                            type: \"Polygon\", // Описываем геометрию геообъекта.\n                            coordinates: this.polygonCoordsAdd([element.UF_LATITUDE, element.UF_LONGITUDE], element.UF_VERTEX_COORDS ?? []),\n                            fillRule: \"nonZero\" // Задаем правило заливки внутренних контуров по алгоритму \"nonZero\".\n                        },\n                        properties:{\n                            // Описываем свойства геообъекта.\n                            // Содержимое балуна.\n                            hintContent: this.$Bitrix.Loc.getMessage('ADDRESS_PROGRAM', {'#COUNT#': element.UF_NUMBER}),\n                            status: element.UF_STATUS,\n                            id: element.ID,\n                        },\n                        options: {\n                            fillColor: '#e75151',\n                            strokeColor: '#ff0400',\n                            opacity: 0.5,\n                            strokeWidth: 5,\n                            strokeStyle: 'solid'\n                        }\n                    };\n    \n                    polygonsObject.push(polygonElement);\n                });\n   \n                let objectManager = new ymaps.ObjectManager({\n                    clusterize: true,\n                    clusterIconLayout: \"default#pieChart\",\n                    clusterDisableClickZoom: false,\n                });\n                let polygonManager = new ymaps.ObjectManager();\n                polygonManager.add(polygonsObject);\n                objectManager.add(features);\n                map.geoObjects.removeAll();\n                map.geoObjects.add(polygonManager);\n                map.geoObjects.add(objectManager);\n    \n                objectManager.objects.events.add(['balloonopen'], (e) => {\n                    const coords = e.get('target').getData().geometry.coordinates;\n                    map.setCenter(coords);\n                });\n                polygonManager.objects.events.add(['click'], (e) => {\n                    let object = polygonManager.objects.getById(e.get('objectId'));\n                    if (object.properties.status === '1' && this.mode !== 'marketer') {\n                        let geoObject = new ymaps.GeoObject({\n                            geometry: object.geometry,\n                            properties: object.properties,\n                        }, object.options);\n    \n                        geoObject.events.add(['click',], (e) => {\n                            e.preventDefault();\n                            geoObject.editor.startEditing();\n                        });\n                        geoObject.events.add(['dblclick'], (e)=> {\n                            e.preventDefault();\n                            geoObject.editor.stopEditing();\n                            let vertexCoords = e.get('target').geometry.getCoordinates();\n    \n                            BX.ready(() => {\n                                console.log(\"BX ready\");\n                                BX.ajax.runComponentAction('kb:address.program', 'setVertexCoords', {\n                                    mode: 'class',\n                                    data: {\n                                        shopId: geoObject.properties.get('id'),\n                                        coords: vertexCoords\n                                    },\n                                }).then(function (response) {\n                                    // console.log(response);\n                                }, function (response) {\n                                    //console.log(response);\n                                });\n                            });\n    \n                        });\n                        map.geoObjects.add(geoObject);\n                        geoObject.editor.startEditing();\n                        polygonManager.remove([e.get('objectId')]);\n                    }\n                });                \n        },\n        polygonCoordsAdd(coordsPlace, coordsVertex) {\n            let polygonArray = coordsVertex\n            //console.log(\"polygonArray\" + polygonArray + \"  --- coordsPlace: \" + coordsPlace);\n            if (coordsVertex.length === 0) {\n                polygonArray = [\n                    [\n                        [(Number(coordsPlace[0]) + 0.00046).toFixed(6), (Number(coordsPlace[1]) - 0.00141).toFixed(6)],\n                        [(Number(coordsPlace[0]) + 0.00046).toFixed(6), (Number(coordsPlace[1]) + 0.0030).toFixed(6)],\n                        [(Number(coordsPlace[0]) - 0.00103).toFixed(6), (Number(coordsPlace[1]) + 0.0030).toFixed(6)],\n                        [(Number(coordsPlace[0]) - 0.00103).toFixed(6), (Number(coordsPlace[1]) - 0.00141).toFixed(6)],\n                    ]\n                ];\n            }\n\n            return polygonArray;\n        },\n        deleteEditEvent() {\n            map.geoObjects.removeAll();\n            this.addGeoObjects();\n        },\n        exportExcel() {\n            document.querySelector('#exportExcel').addEventListener('click',   () => {\n                let excelArray = [];\n                if (this.mode === 'admin') {\n                    excelArray = this.shops[0].ADDRESS_PROGRAM.map(excelData => ({\n                        [this.$Bitrix.Loc.getMessage('ADDRESS_STREET')]: excelData.UF_STREET,\n                        [this.$Bitrix.Loc.getMessage('ADDRESS_HOUSE')]: excelData.UF_HOUSE,\n                        [this.$Bitrix.Loc.getMessage('ADDRESS_COUNT_OF_FLATS')]: excelData.UF_FLAT_COUNT ?? 0,\n                    }));\n                } else {\n                    excelArray = this.shops.map(excelData => ({\n                        [this.$Bitrix.Loc.getMessage('ADDRESS_SHOP')]: excelData.UF_ADDRESS,\n                        [this.$Bitrix.Loc.getMessage('NUMBER_SHOP')]: excelData.UF_NUMBER,\n                        [this.$Bitrix.Loc.getMessage('FLAT_COUNT')]: excelData.UF_ADDRESS_SUM ?? 0,\n                    }));\n                }\n\n                import(\"xlsx/dist/xlsx.mini.min\").then((_XLSX) => {\n                    const XLSX = _XLSX.default\n                    const workbook = XLSX.utils.book_new();\n                    const worksheet = XLSX.utils.json_to_sheet(excelArray);\n                    XLSX.utils.book_append_sheet(workbook, worksheet, this.$Bitrix.Loc.getMessage('ADDRESS_PROGRAM_1'));\n                    XLSX.writeFile(workbook, \"export.xlsx\");\n                });\n            });\n        },\n    },\n    created: async function () {\n        await this.initYandexMaps();\n        this.exportExcel();\n    },\n    watch: {\n        pointToDelete(newValue, oldValue) {\n            if (oldValue.length > 0) {\n                this.deleteEditEvent();\n            }\n        }\n    },\n\t// language=Vue\n\ttemplate: `\n        <Admin v-if=\"mode === 'admin'\" v-model:shopDetail=\"shops[0]\"/>\n        <Super v-else :marketer=\"mode === 'marketer'\" v-model:shops=\"shops\" @onGetAjax=\"deleteEditEvent()\"/>\n    `\n};","import './css/super.css';\nimport {AddressList} from \"./addresslist\";\nimport {Filter} from \"./filter\";\nimport {shopStore} from \"../stores/shop\";\n\nexport const Super = {\n    emits: ['onGetAjax', 'update:shops'],\n    props: {\n        marketer: {default: false},\n        shops: {default: []}\n    },\n    components: {\n        AddressList, Filter\n    },\n    data() {\n        return {\n            filterShopNumber: '',\n            filterStatus: '',\n            filterCity: '',\n            filterTerritory: '',\n            filterRegion: '',\n            filterZru: '',\n            filterSupervisor: '',\n            clickId: 0\n        }\n    },\n    methods: {\n        getFilter(shops) {\n            return shops.filter((item)=> {\n                return (String(item.UF_NUMBER).includes(this.filterShopNumber) ||\n                    String(item.UF_ADDRESS).includes(this.filterShopNumber)) &&\n                    String(item.UF_STATUS).includes(this.filterStatus) &&\n                    String(item.UF_CITY).includes(this.filterCity) &&\n                    String(item.UF_TERRITORY).includes(this.filterTerritory) &&\n                    String(item.UF_REGION).includes(this.filterRegion) &&\n                    String(item.UF_ZRU_ID).includes(this.filterZru) &&\n                    String(item.UF_SUPERVISOR).includes(this.filterSupervisor);\n            })\n        },\n        getFilteredFlatsCount(shops) {\n            return shops.reduce((acc, item) => acc + +item.UF_ADDRESS_SUM, 0);\n        },\n        getShopsMarketer() {\n            if (this.marketer) {\n                let body = document.querySelector('.address-hover');\n                body.classList.toggle('ajax-processed');\n                BX.ready(() => {\n                    BX.ajax.runComponentAction('kb:address.program', 'getShops', {\n                        mode: 'class',\n                        data: {\n                            shopsFilter: {\n                                '%UF_NUMBER': this.filterShopNumber,\n                                '%UF_ADDRESS': this.filterShopNumber,\n                                'UF_STATUS': this.filterStatus,\n                                '%UF_CITY': this.filterCity,\n                                '%UF_TERRITORY': this.filterTerritory,\n                                '%UF_REGION': this.filterRegion,\n                                '%UF_ZRU_ID': this.filterZru,\n                                '%UF_SUPERVISOR': this.filterSupervisor,\n                            },\n                            shopsSelect: ['UF_NUMBER', 'UF_ADDRESS', 'UF_STATUS', 'UF_CITY', 'UF_TERRITORY', 'UF_ZRU_ID',\n                                'UF_SUPERVISOR', 'UF_PHONE', 'UF_LATITUDE', 'UF_LONGITUDE', 'UF_VERTEX_COORDS', 'UF_EMAIL', 'UF_PEOPLE']\n                        },\n                    }).then((response) => {\n                        shopStore().shops = response.data['SHOPS'];\n                        shopStore().histories = response.data['HISTORIES'];\n                        if (response.data['SHOPS'].length !== 0) {\n                            this.$emit('onGetAjax');\n                        }\n                        body.classList.toggle('ajax-processed');\n                    }, function (response) {\n                        console.log(response);\n                    });\n                });\n            }\n        }\n    },\n    watch: {\n        filterShopNumber() {\n            this.getShopsMarketer();\n        },\n        filterStatus() {\n            this.getShopsMarketer();\n        },\n        filterCity() {\n            this.getShopsMarketer();\n        },\n        filterTerritory() {\n            this.getShopsMarketer();\n        },\n        filterRegion() {\n            this.getShopsMarketer();\n        },\n        filterZru() {\n            this.getShopsMarketer();\n        },\n        filterSupervisor() {\n            this.getShopsMarketer();\n        },\n    },\n    // language=Vue\n    template: `\n        <div class=\"super-container\">\n            <div class=\"shop-header\">\n                <div class=\"shop-count\">{{ $Bitrix.Loc.getMessage('SHOPS_COUNT', {'#COUNT#': Number(getFilter(shops).length).toLocaleString('ru-RU')}) }}</div>\n                <div class=\"shop-flats\">{{ $Bitrix.Loc.getMessage('FLATS_COUNT', {'#COUNT#': Number(getFilteredFlatsCount(getFilter(shops))).toLocaleString('ru-RU')}) }}</div>\n            </div>\n            <div class=\"shop-list-container\">\n                <div v-if=\"getFilter(shops).length !== 0\" class=\"shop-list\">\n                    <template v-for=\"(value, index) in getFilter(shops)\" :key=\"index\">\n                        <AddressList v-model:shopDetail=\"value\" :marketer=\"marketer\" v-model:isClick=\"clickId\"/>\n                    </template>\n                </div>\n                <div v-else class=\"shop-not-found\">{{ $Bitrix.Loc.getMessage('NOT_FOUND') }}</div>\n                <Filter :isClick=\"marketer\" v-model:shopNumber=\"filterShopNumber\" v-model:status=\"filterStatus\" v-model:region=\"filterRegion\" \n                        v-model:territory=\"filterTerritory\" v-model:zru=\"filterZru\" v-model:supervisor=\"filterSupervisor\" v-model:city=\"filterCity\"\n                />\n            </div>\n        </div>\n    `,\n}","import './css/filter.css';\nimport {mapState} from \"ui.vue3.pinia\";\nimport {shopStore} from \"../stores/shop\";\nexport const Filter = {\n    data() {\n        return {\n            isClickInput: this.isClick,\n        }\n    },\n    props: {\n        shopNumber: {default: ''},\n        status: {default: ''},\n        region: {default: ''},\n        territory: {default: ''},\n        zru: {default: ''},\n        supervisor: {default: ''},\n        city: {default: ''},\n        isClick: {default: false}\n    },\n    computed: {\n        ...mapState(shopStore, ['filters']),\n        shopNumberInput: {\n            get: function(){\n                return this.shopNumber;\n            },\n            set: function(newValue){\n                this.$emit('update:shopNumber', newValue)\n            }\n        },\n        statusInput: {\n            get: function(){\n                return this.status;\n            },\n            set: function(newValue){\n                this.$emit('update:status', newValue)\n            }\n        },\n        regionInput: {\n            get: function(){\n                return this.region;\n            },\n            set: function(newValue){\n                this.$emit('update:region', newValue)\n            }\n        },\n        territoryInput: {\n            get: function(){\n                return this.territory;\n            },\n            set: function(newValue){\n                this.$emit('update:territory', newValue)\n            }\n        },\n        zruInput: {\n            get: function(){\n                return this.zru;\n            },\n            set: function(newValue){\n                this.$emit('update:zru', newValue)\n            }\n        },\n        supervisorInput: {\n            get: function(){\n                return this.supervisor;\n            },\n            set: function(newValue){\n                this.$emit('update:supervisor', newValue)\n            }\n        },\n        cityInput: {\n            get: function(){\n                return this.city;\n            },\n            set: function(newValue){\n                this.$emit('update:city', newValue)\n            }\n        },\n        optionsStatus(){\n            return [\n                { text: this.$Bitrix.Loc.getMessage('STATUS_1'), value: '1' },\n                { text: this.$Bitrix.Loc.getMessage('STATUS_2'), value: '2' },\n                { text: this.$Bitrix.Loc.getMessage('STATUS_3'), value: '3' },\n                { text: this.$Bitrix.Loc.getMessage('STATUS_4'), value: '4' },\n            ];\n        },\n    },\n    // language=Vue\n    template: `\n        <div class=\"filter\">\n            <div class=\"filterFields\" v-if=\"isClickInput\">\n                <input type=\"search\" :placeholder=\"$Bitrix.Loc.getMessage('FILTERS_SHOP')\" v-model=\"shopNumberInput\">\n                <select v-model=\"statusInput\" required>\n                    <option value=\"\" selected>{{ $Bitrix.Loc.getMessage('FILTERS_STATUS') }}</option>\n                    <option v-for=\"option in optionsStatus\" :key=\"option.id\" :value=\"option.value\">{{ option.text }}</option>\n                </select>\n                <select v-model=\"zruInput\" required>\n                    <option value=\"\" selected>{{ $Bitrix.Loc.getMessage('FILTERS_ZRU') }}</option>\n                    <option v-for=\"(option, key) in filters.UF_ZRU\" :key=\"key\" :value=\"key\">{{ option }}</option>\n                </select>\n                <select v-model=\"supervisorInput\" required>\n                    <option value=\"\" selected>{{ $Bitrix.Loc.getMessage('FILTERS_SUPERVISOR') }}</option>\n                    <option v-for=\"(option, key) in filters.UF_SUPERVISOR\" :key=\"key\" :value=\"key\">{{ option }}</option>\n                </select>\n                <input type=\"search\" :placeholder=\"$Bitrix.Loc.getMessage('FILTERS_CITY')\" v-model=\"cityInput\" list=\"cityList\">\n                <datalist id=\"cityList\">\n                    <option v-for=\"option in filters.UF_CITY\" :key=\"option.id\" :value=\"option\"/>\n                </datalist>\n                <select v-model=\"regionInput\" required>\n                    <option value=\"\" selected>{{ $Bitrix.Loc.getMessage('FILTERS_REGION') }}</option>\n                    <option v-for=\"(option, key) in filters.UF_REGION\" :key=\"key\" :value=\"option\">{{ option }}</option>\n                </select>\n                <select v-model=\"territoryInput\" required>\n                    <option value=\"\" selected>{{ $Bitrix.Loc.getMessage('FILTERS_TERRITORY') }}</option>\n                    <option v-for=\"(option, key) in filters.UF_TERRITORY\" :key=\"key\" :value=\"option\">{{ option }}</option>\n                </select>\n            </div>\n            <div class=\"filterButton\" @click=\"isClickInput = !isClickInput\" :class=\"{filterActive: isClickInput}\">\n                <img class=\"filterImg\" :src=\"$Bitrix.Data.get('site_path') + '/filter.svg'\" alt=\"filter\">\n                {{ $Bitrix.Loc.getMessage('FILTERS') }} \n                <img class=\"toggle\" v-if=\"isClickInput\" :src=\"$Bitrix.Data.get('site_path') + '/toggle-up.svg'\" alt=\"toggle-up\">\n                <img class=\"toggle\" v-else :src=\"$Bitrix.Data.get('site_path') + '/toggle-down.svg'\" alt=\"toggle-down\">\n            </div>\n        </div>\n    `,\n}","import './css/history.css';\nimport {mapState} from \"ui.vue3.pinia\";\nimport {historyStore} from \"../stores/history\";\nexport const HistoryApp =\n{\n    data() {\n        return {\n            filterShopNumber: '',\n        }\n    },\n    props: {\n        mode: { default: 'admin' },\n    },\n    computed: {\n        ...mapState(historyStore, ['histories']),\n    },\n    methods: {\n        getFilter(histories) {\n            return histories.filter((item, index)=> {\n                return String(item.UF_SHOP_NUMBER).includes(this.filterShopNumber);\n            })\n        },\n        statusImg(statusNumber) {\n            let url = this.$Bitrix.Data.get('site_path');\n            switch (statusNumber) {\n                case '2':\n                    url += '/status-wait.svg';\n                    break;\n                case '3':\n                    url += '/status-done.svg';\n                    break;\n                case '4':\n                    url += '/status-edit.svg';\n                    break;\n                case '1':\n                default:\n                    url += '/status-new.svg';\n                    break;\n            }\n            return url;\n        }\n    },\n    // language=Vue\n    template: `\n        <div v-if=\"mode !== 'admin'\">\n            <div>\n                <input class=\"shopFilter\" :placeholder=\"$Bitrix.Loc.getMessage('FILTERS_SHOP')\" v-model=\"filterShopNumber\">\n            </div>\n            <div class=\"historyTable\">\n                <div class=\"tableRow tableHeaderRow\">\n                    <div class=\"tableCell\">{{ $Bitrix.Loc.getMessage('DATE') }}</div>\n                    <div class=\"tableCell\">{{ $Bitrix.Loc.getMessage('FILTERS_SHOP') }}</div>\n                    <div class=\"tableCell\">{{ $Bitrix.Loc.getMessage('USER') }}</div>\n                    <div class=\"tableCell\">{{ $Bitrix.Loc.getMessage('BEFORE') }}</div>\n                    <div class=\"tableCell\">{{ $Bitrix.Loc.getMessage('AFTER') }}</div>\n                </div>\n                <div class=\"tableRow\" v-for=\"(value, index) in getFilter(this.histories)\" :key=\"index\">\n                    <div class=\"tableCell\">{{ value.UF_DATE }}</div>\n                    <div class=\"tableCell\">{{ value.UF_SHOP_NUMBER }}</div>\n                    <div class=\"tableCell\">{{ value.UF_USER_FULLNAME }}</div>\n                    <div class=\"tableCell\">\n                        <img :src=\"statusImg(value.UF_STATUS_BEFORE)\" alt=\"statusIcon\"/>\n                    </div>\n                    <div class=\"tableCell\">\n                        <img :src=\"statusImg(value.UF_STATUS_AFTER)\" alt=\"statusIcon\"/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `\n};","import {BitrixVue} from 'ui.vue3';\nimport {createPinia} from 'ui.vue3.pinia';\nimport {Application} from './components/address';\nimport {HistoryApp} from './components/history';\nimport {shopStore} from './stores/shop';\nimport {historyStore} from './stores/history';\n\nexport class AddressProgram\n{\n    #store;\n    #addressApp;\n    #addressNode;\n    #historyApp;\n    #historyNode;\n\n    constructor(addressNode, historyNode): void\n    {\n        this.#store = createPinia();\n        this.#addressNode = document.querySelector(addressNode);\n        this.#historyNode = document.querySelector(historyNode);\n    }\n\n    start(mode, site_path): void\n    {\n        this.#addressApp = BitrixVue.createApp({\n            beforeCreate() {\n                this.$bitrix.Data.set('site_path', site_path);\n            },\n            name: 'Address Application',\n            data() {\n                return {\n                    mode: mode\n                }\n            },\n            components: {\n                Application\n            },\n            // language=Vue\n            template: '<Application :mode=\"this.mode\"/>',\n        }).use(this.#store).mount(this.#addressNode);\n\n        this.#historyApp = BitrixVue.createApp({\n            beforeCreate() {\n                this.$bitrix.Data.set('site_path', site_path);\n            },\n            name: 'History Application',\n            data() {\n                return {\n                    mode: mode\n                }\n            },\n            components: {\n                HistoryApp\n            },\n            // language=Vue\n            template: '<HistoryApp :mode=\"this.mode\"/>',\n        }).use(this.#store).mount(this.#historyNode);\n    }\n\n    getShopStore(): Object\n    {\n        return shopStore();\n    }\n\n    getHistoryStore(): Object\n    {\n        return historyStore();\n    }\n}"],"names":["historyStore","defineStore","state","histories","ID","UF_SHOP_NUMBER","UF_DATE","UF_USER_FULLNAME","UF_STATUS_AFTER","UF_STATUS_BEFORE","AddressDetail","data","isEdit","error","errorText","props","detailShop","default","isAdmin","isClick","marketer","emits","components","AddressItem","methods","removeItem","this","status","$emit","street","house","flatCount","computed","streetInput","get","set","newValue","houseInput","flatCountInput","template","mapState","detailShopAdmin","isClickValue","totalFlats","ADDRESS_PROGRAM","reduce","acc","item","UF_FLAT_COUNT","watch","deep","handler","UF_ADDRESS_SUM","saveAddresses","addNewAddress","UF_STATUS","push","UF_STREET","UF_HOUSE","UF_NUMBER","deleteAddress","key","splice","BX","ready","ajax","runComponentAction","mode","shopNumber","_this2","addresses","comment","UF_COMMENT","then","response","console","log","changeStatus","element","confirm","$Bitrix","Loc","getMessage","_this","shopId","_this3","STATUS","FIELDS","TEXT","close","Admin","shopDetail","AddressList","statusImg","url","Data","statusName","name","isClickInput","isClickBool","setClick","map","setCenter","UF_LATITUDE","UF_LONGITUDE","shopStore","shops","UF_ADDRESS","UF_CITY","UF_REGION","UF_TERRITORY","UF_PEOPLE","UF_PHONE","UF_ENTITY","UF_EMAIL","UF_ADMIN_ID","UF_RU_ID","UF_ZRU_ID","UF_SUPERVISOR","UF_VERTEX_COORDS","filters","UF_ZRU","Application","Super","Filter","region","territory","zru","supervisor","city","shopNumberInput","statusInput","regionInput","territoryInput","zruInput","supervisorInput","cityInput","optionsStatus","text","value","filterShopNumber","filterStatus","filterCity","filterTerritory","filterRegion","filterZru","filterSupervisor","clickId","getFilter","filter","String","includes","getFilteredFlatsCount","getShopsMarketer","body","document","querySelector","classList","toggle","shopsFilter","%UF_NUMBER","%UF_ADDRESS","%UF_CITY","%UF_TERRITORY","%UF_REGION","%UF_ZRU_ID","%UF_SUPERVISOR","shopsSelect","length","sw_lat","sw_lng","ne_lat","ne_lng","center_lat","center_lng","geoLocationsIsEmpty","pointToDelete","shop","filteredShops","_geoLocationsIsEmpty","getParam","location","res","window","hash","match","RegExp","setLocationHash","event","params","getType","split","getCenter","getZoom","join","_context","boundsNew","v_sw_lat","v_sw_lng","v_ne_lat","v_ne_lng","lat_additive","lng_additive","addGeoObjects","setMapStateByHash","hashType","hashCenter","hashZoom","setType","setZoom","initYandexMaps","_context4","ymaps","Map","center","_this2$shops$","_this2$shops$2","zoom","controls","searchControlProvider","zoomControlSize","typeSelectorSize","zoomControlPosition","top","right","geolocationControlPosition","typeSelectorPosition","events","add","_context2","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","_context3","features","polygonsObject","myIcon","templateLayoutFactory","createClass","forEach","type","id","geometry","coordinates","properties","balloonContentHeader","#NUMBER#","balloonContentBody","#COUNT#","#PHONE#","clusterCaption","iconCaption","options","preset","iconLayout","iconImageHref","iconImageSize","iconShape","iconContentLayout","polygonElement","polygonCoordsAdd","fillRule","hintContent","fillColor","strokeColor","opacity","strokeWidth","strokeStyle","objectManager","ObjectManager","clusterize","clusterIconLayout","clusterDisableClickZoom","polygonManager","geoObjects","removeAll","objects","e","getData","object","getById","geoObject","GeoObject","preventDefault","editor","startEditing","stopEditing","vertexCoords","getCoordinates","remove","coordsPlace","coordsVertex","polygonArray","Number","toFixed","deleteEditEvent","exportExcel","addEventListener","excelArray","_this4","excelData","import","_XLSX","XLSX","workbook","utils","book_new","worksheet","json_to_sheet","book_append_sheet","writeFile","created","_context6","oldValue","HistoryApp","index","statusNumber","AddressProgram","addressNode","historyNode","babelHelpers","_classPrivateFieldInitSpec","writable","createPinia","site_path","BitrixVue","createApp","beforeCreate","$bitrix","use","mount"],"mappings":"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"}